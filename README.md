promises v1.1 implementation, passes test suite

